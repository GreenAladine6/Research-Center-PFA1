<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <meta name="description" content="" />
  <meta name="author" content="" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;400;500;700;900&display=swap" rel="stylesheet" />

  <title>ENSIT Research Center - Publications</title>

  <!-- Bootstrap core CSS -->
  <link href="{{ url_for('static', filename='css/bootstrap.min.css') }}" rel="stylesheet" />

  <!-- Additional CSS Files -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous" />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/templatemo-chain-app-dev.css') }}" />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/animated.css') }}" />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/owl.css') }}" />
  <style>
    /* Improve card hover effect */
    .card:hover {
      box-shadow: 0 8px 16px rgba(75, 142, 241, 0.3);
      transform: translateY(-5px);
      transition: all 0.3s ease;
    }

    /* Modal form improvements */
    .modal-content {
      border-radius: 8px;
    }

    .modal-header {
      background-color: #4b8ef1;
      color: white;
      border-bottom: none;
      border-top-left-radius: 8px;
      border-top-right-radius: 8px;
    }

    .btn-primary {
      background-color: #4b8ef1;
      border-color: #4b8ef1;
    }

    .btn-primary:hover {
      background-color: #3a6fcc;
      border-color: #3a6fcc;
    }

    /* Responsive adjustments */
    @media (max-width: 576px) {
      main h1 {
        font-size: 1.8rem;
        text-align: center;
      }
    }

    .d-none {
      display: none !important;
    }
  </style>
</head>
<body>
  <!-- ***** Preloader Start ***** -->
  <div id="js-preloader" class="js-preloader">
    <div class="preloader-inner">
      <span class="dot"></span>
      <div class="dots">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>
  </div>
  <!-- ***** Preloader End ***** -->

  <!-- ***** Header Area Start ***** -->
  <header class="header-area header-sticky wow slideInDown" data-wow-duration="0.75s" data-wow-delay="0s">
    <div class="container">
      <div class="row">
        <div class="col-12">
          <nav class="main-nav">
            <!-- ***** Logo Start ***** -->
            <a href="{{ url_for('fr.index') }}" class="logo">
              <img src="{{ url_for('static', filename='images/logo.png') }}" alt="ENSIT Research Center" />
            </a>
            <!-- ***** Logo End ***** -->
            <!-- ***** Menu Start ***** -->
            <ul class="nav">
              <li class="scroll-to-section"><a href="{{ url_for('fr.index') }}">Home</a></li>
              <li class="scroll-to-section"><a href="{{ url_for('fr.events') }}">Events</a></li>
              <li class="scroll-to-section"><a href="{{ url_for('fr.project') }}">Project</a></li>
              <li class="scroll-to-section"><a href="{{ url_for('fr.staff') }}">Staff</a></li>
              <li class="scroll-to-section"><a href="{{ url_for('fr.publications') }}" class="active">Publications</a></li>
              <li class="scroll-to-section"><a href="{{ url_for('fr.about') }}">About Us</a></li>
              <li class="scroll-to-section"><a href="{{ url_for('fr.contact') }}" class="contact-btn">Contact</a></li>
            </ul>
            <a class="menu-trigger">
              <span>Menu</span>
            </a>
            <!-- ***** Menu End ***** -->
          </nav>
        </div>
      </div>
    </div>
  </header>
  <!-- ***** Header Area End ***** -->

  <main style="padding-top: 150px; padding-bottom: 50px;">
    <h1 class="text-center mb-4">Publications</h1>
    <div class="container mt-4">
      <div class="mb-3">
        <label for="publication-input" class="form-label">Search Publications:</label>
        <div class="input-group" style="max-width: 300px;">
          <span class="input-group-text" style="background-color: white; border-right: none;">
            <i class="fas fa-book" style="color: #4b8ef1;"></i>
          </span>
          <input type="text" id="publication-input" name="publication" placeholder="Enter publication title" class="form-control" style="border-left: none;" />
        </div>
      </div>
      <div id="content-container" class="row">
        <!-- Initial 3 publication cards -->
        <div class="col-12 mb-4 initial-publication">
          <div class="card">
            <div class="card-body">
              <h5 class="card-title">Publication Title 1</h5>
              <p class="card-text">This is a brief description of the publication. It highlights key points and findings.</p>
              <a href="{{ url_for('fr.publications') }}" class="btn btn-primary">Read More</a>
            </div>
          </div>
        </div>
        <div class="col-12 mb-4 initial-publication">
          <div class="card">
            <div class="card-body">
              <h5 class="card-title">Publication Title 2</h5>
              <p class="card-text">This is a brief description of the publication. It highlights key points and findings.</p>
              <a href="{{ url_for('fr.publications') }}" class="btn btn-primary">Read More</a>
            </div>
          </div>
        </div>
        <div class="col-12 mb-4 initial-publication">
          <div class="card">
            <div class="card-body">
              <h5 class="card-title">Publication Title 3</h5>
              <p class="card-text">This is a brief description of the publication. It highlights key points and findings.</p>
              <a href="{{ url_for('fr.publications') }}" class="btn btn-primary">Read More</a>
            </div>
          </div>
        </div>
      </div>
      <div class="text-center mt-3">
        <button type="button" id="publication-more-btn" class="btn btn-secondary">More</button>
        <button type="button" id="publication-less-btn" class="btn btn-secondary ms-2" disabled>Less</button>
        <button type="button" class="btn btn-success ms-2" data-bs-toggle="modal" data-bs-target="#addPublicationModal">Add New</button>
      </div>
    </div>
  </main>

  <!-- Add Publication Modal -->
  <div class="modal fade" id="addPublicationModal" tabindex="-1" aria-labelledby="addPublicationModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <form id="addPublicationForm" action="{{ url_for('fr.add_publication') }}" method="POST">
          <div class="modal-header">
            <h5 class="modal-title" id="addPublicationModalLabel">Add New Publication</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <div class="mb-3">
              <label for="publicationTitle" class="form-label">Title</label>
              <input type="text" class="form-control" id="publicationTitle" name="title" required />
            </div>
            <div class="mb-3">
              <label for="publicationDescription" class="form-label">Description</label>
              <textarea class="form-control" id="publicationDescription" name="description" rows="3" required></textarea>
            </div>
            <div class="mb-3">
              <label for="publicationLink" class="form-label">Link</label>
              <input type="url" class="form-control" id="publicationLink" name="link" />
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
            <button type="submit" class="btn btn-primary">Add Publication</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <footer id="contact">
    <div class="container">
      <div class="row">
        <div class="col-lg-3">
          <div class="footer-widget">
            <h4>Contact Us</h4>
            <p>ENSIT Beb Alioua, Tunis</p>
            <p><a href="#">123456789</a></p>
            <p><a href="mailto:ensit@research.center">ensit@research.center</a></p>
          </div>
        </div>
        <div class="col-lg-3">
          <div class="footer-widget">
            <h4>About Us</h4>
            <ul>
              <li><a href="{{ url_for('fr.index') }}">Home</a></li>
              <li><a href="#">Services</a></li>
              <li><a href="{{ url_for('fr.about') }}">About</a></li>
              <li><a href="#">Testimonials</a></li>
              <li><a href="#">Pricing</a></li>
            </ul>
          </div>
        </div>
        <div class="col-lg-3">
          <div class="footer-widget">
            <h4>Useful Links</h4>
            <ul>
              <li><a href="#">Research</a></li>
              <li><a href="{{ url_for('fr.project') }}">Projects</a></li>
              <li><a href="{{ url_for('fr.publications') }}">Publications</a></li>
              <li><a href="{{ url_for('fr.events') }}">Events</a></li>
              <li><a href="#">News</a></li>
            </ul>
          </div>
        </div>
        <div class="col-lg-3">
          <div class="footer-widget">
            <h4>About Our Center</h4>
            <div class="logo">
              <img src="{{ url_for('static', filename='images/white-logo.png') }}" alt="" />
            </div>
            <p>ENSIT Research Center is dedicated to advancing knowledge and innovation through interdisciplinary research and collaboration.</p>
          </div>
        </div>
        <div class="col-lg-12">
          <div class="copyright-text">
            <p>Copyright Â© 2023 ENSIT Research Center. All Rights Reserved.</p>
          </div>
        </div>
      </div>
    </div>
  </footer>

  <!-- Contact Form Overlay -->
  <div id="form-overlay" style="display:none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); z-index: 1000;">
    <div id="contact-form-container" style="background: white; padding: 30px; border-radius: 8px; width: 90%; max-width: 500px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">
      <span class="modal_close" style="position: absolute; top: 10px; right: 15px; cursor: pointer; font-size: 20px;">Ã</span>
      <form id="contact-form" action="{{ url_for('fr.contact') }}" method="POST">
        <h2 style="margin-top: 0; color: #4b8ef1; text-align: center;">Contact Us</h2>
        <div style="margin-bottom: 15px;">
          <label for="name" style="display: block; margin-bottom: 5px; font-weight: 500;">Name:</label>
          <input type="text" id="name" name="name" required style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box;">
        </div>
        <div style="margin-bottom: 15px;">
          <label for="email" style="display: block; margin-bottom: 5px; font-weight: 500;">Email:</label>
          <input type="email" id="email" name="email" required style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box;">
        </div>
        <div style="margin-bottom: 20px;">
          <label for="message" style="display: block; margin-bottom: 5px; font-weight: 500;">Message:</label>
          <textarea id="message" name="message" rows="5" required style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box; resize: vertical;"></textarea>
        </div>
        <div style="display: flex; justify-content: space-between;">
          <button type="button" id="cancel-contact-btn" style="padding: 10px 20px; background-color: #f44336; color: white; border: none; border-radius: 4px; cursor: pointer;">Cancel</button>
          <button type="submit" style="padding: 10px 20px; background-color: #4b8ef1; color: white; border: none; border-radius: 4px; cursor: pointer;">Send Message</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Scripts -->
  <script src="{{ url_for('static', filename='js/jquery.min.js') }}"></script>
  <script src="{{ url_for('static', filename='js/bootstrap.bundle.min.js') }}"></script>
  <script src="{{ url_for('static', filename='js/owl-carousel.js') }}"></script>
  <script src="{{ url_for('static', filename='js/animation.js') }}"></script>
  <script src="{{ url_for('static', filename='js/imagesloaded.js') }}"></script>
  <script src="{{ url_for('static', filename='js/popup.js') }}"></script>
  <script src="{{ url_for('static', filename='js/custom.js') }}"></script>
  <script src="{{ url_for('static', filename='js/scripts_fixed.js') }}"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      let publicationCounter = 3; // Tracks the number of publication cards added

      // Search functionality
      const publicationInput = document.getElementById('publication-input');
      if (publicationInput) {
        publicationInput.addEventListener('input', function() {
          const filter = this.value.toLowerCase().trim();
          const publicationCards = document.querySelectorAll('#content-container .col-12');
          publicationCards.forEach(card => {
            const title = card.querySelector('.card-title').textContent.toLowerCase();
            card.style.display = title.includes(filter) ? '' : 'none';
          });
        });
      }

      // Function to add three new publication cards
      function addPublicationCards() {
        for (let i = 0; i < 3; i++) {
          publicationCounter++;
          const newPublication = `
            <div class="col-12 mb-4 added-publication" data-publication-id="${publicationCounter}">
              <div class="card">
                <div class="card-body">
                  <h5 class="card-title">Publication Title ${publicationCounter}</h5>
                  <p class="card-text">This is a brief description of publication ${publicationCounter}. It highlights key points and findings.</p>
                  <a href="{{ url_for('fr.publications') }}" class="btn btn-primary">Read More</a>
                </div>
              </div>
            </div>
          `;
          document.getElementById('content-container').insertAdjacentHTML('beforeend', newPublication);
        }
        document.getElementById('publication-less-btn').disabled = false;
      }

      // More button handler
      const moreBtn = document.getElementById('publication-more-btn');
      if (moreBtn) {
        moreBtn.addEventListener('click', addPublicationCards);
      }

      // Less button handler
      const lessBtn = document.getElementById('publication-less-btn');
      if (lessBtn) {
        lessBtn.addEventListener('click', function() {
          const addedPublications = document.querySelectorAll('.added-publication');
          const toRemove = Array.from(addedPublications).slice(-3);
          if (toRemove.length > 0) {
            toRemove.forEach(publication => publication.remove());
            publicationCounter -= toRemove.length;
          }
          if (document.querySelectorAll('.added-publication').length === 0) {
            lessBtn.disabled = true;
          }
        });
      }

      // Contact Form Handling
      const contactFormOverlay = document.getElementById('form-overlay');
      const cancelContactBtn = document.getElementById('cancel-contact-btn');
      const closeBtn = document.querySelector('#contact-form-container .modal_close');
      const contactButtons = document.querySelectorAll('.contact-btn');

      contactButtons.forEach(button => {
        button.addEventListener('click', function(e) {
          e.preventDefault();
          contactFormOverlay.style.display = 'block';
        });
      });

      function hideContactForm() {
        contactFormOverlay.style.display = 'none';
      }

      if (cancelContactBtn) {
        cancelContactBtn.addEventListener('click', hideContactForm);
      }

      if (closeBtn) {
        closeBtn.addEventListener('click', hideContactForm);
      }

      const contactForm = document.getElementById('contact-form');
      if (contactForm) {
        contactForm.addEventListener('submit', function(e) {
          e.preventDefault();
          alert('Thank you for your message! We will get back to you soon.');
          hideContactForm();
          contactForm.reset();
        });
      }

      contactFormOverlay.addEventListener('click', function(e) {
        if (e.target === contactFormOverlay) {
          hideContactForm();
        }
      });

      // Add Publication Form Handling
      const addPublicationForm = document.getElementById('addPublicationForm');
      if (addPublicationForm) {
        addPublicationForm.addEventListener('submit', function(e) {
          e.preventDefault();
          const formData = new FormData(this);
          fetch(this.action, {
            method: 'POST',
            body: formData
          })
          .then(response => response.json())
          .then(data => {
            if (data.success) {
              publicationCounter++;
              const newPublication = `
                <div class="col-12 mb-4 added-publication" data-publication-id="${publicationCounter}">
                  <div class="card">
                    <div class="card-body">
                      <h5 class="card-title">${formData.get('title')}</h5>
                      <p class="card-text">${formData.get('description')}</p>
                      ${formData.get('link') ? `<a href="${formData.get('link')}" class="btn btn-primary" target="_blank">Read More</a>` : `<a href="{{ url_for('fr.publications') }}" class="btn btn-primary">Read More</a>`}
                    </div>
                  </div>
                </div>
              `;
              document.getElementById('content-container').insertAdjacentHTML('beforeend', newPublication);
              document.getElementById('publication-less-btn').disabled = false;
              addPublicationForm.reset();
              bootstrap.Modal.getInstance(document.getElementById('addPublicationModal')).hide();
              alert('Publication added successfully!');
            } else {
              alert('Error adding publication: ' + (data.message || 'Unknown error'));
            }
          })
          .catch(error => {
            console.error('Error:', error);
            alert('An error occurred while adding the publication.');
          });
        });
      }
    });
  </script>
</body>
</html>