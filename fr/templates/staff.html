<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <meta name="description" content="Staff at ENSIT Research Center" />
  <meta name="author" content="ENSIT Research Center" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;400;500;700;900&display=swap" rel="stylesheet" />

  <title>ENSIT Research Center - Staff</title>

  <!-- Bootstrap core CSS -->
  <link href="{{ url_for('static', filename='css/bootstrap.min.css') }}" rel="stylesheet" />

  <!-- Additional CSS Files -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous" />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/templatemo-chain-app-dev.css') }}" />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/animated.css') }}" />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/owl.css') }}" />
  <style>
    .d-none {
      display: none !important;
    }

    /* Staff Grid Styling */
    #staffRow {
      margin-top: 30px;
    }

    #staffRow .col-md-4 {
      display: flex;
      justify-content: center;
      margin-bottom: 30px;
    }

    #staffRow .card {
      background: #fff;
      border: none;
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      overflow: hidden;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      max-width: 350px;
      width: 100%;
    }

    #staffRow .card:hover {
      transform: translateY(-10px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
    }

    #staffRow .staff-image {
      width: 100%;
      height: 200px;
      object-fit: cover;
      border-bottom: 3px solid #4b8ef1;
    }

    #staffRow .staff-details {
      padding: 20px;
    }

    #staffRow .staff-title {
      font-size: 1.5rem;
      font-weight: 700;
      color: #333;
      margin-bottom: 15px;
      line-height: 1.3;
    }

    #staffRow .staff-position {
      display: flex;
      align-items: center;
      font-size: 0.95rem;
      color: #555;
      margin-bottom: 8px;
    }

    #staffRow .staff-position i {
      color: #4b8ef1;
      margin-right: 8px;
    }

    #staffRow .staff-position span {
      font-weight: 400;
    }

    #staffRow .staff-bio {
      font-size: 0.95rem;
      color: #666;
      margin-bottom: 15px;
      display: -webkit-box;
      -webkit-line-clamp: 3;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    #staffRow .btn-primary {
      background: #4b8ef1;
      border: none;
      border-radius: 8px;
      padding: 10px 20px;
      font-weight: 500;
      transition: background 0.3s ease;
    }

    #staffRow .btn-primary:hover {
      background: #3a7bd5;
    }

    #moreStaffBtn,
    #lessStaffBtn {
      padding: 12px 30px;
      font-size: 1rem;
      font-weight: 500;
      border-radius: 8px;
      margin: 0 10px;
      transition: background 0.3s ease, transform 0.2s ease;
    }

    #moreStaffBtn {
      background: #4b8ef1;
      color: #fff;
      border: none;
    }

    #moreStaffBtn:hover {
      background: #3a7bd5;
      transform: translateY(-2px);
    }

    #lessStaffBtn {
      background: #e0e0e0;
      color: #333;
      border: none;
    }

    #lessStaffBtn:hover:not(:disabled) {
      background: #d0d0d0;
      transform: translateY(-2px);
    }

    #lessStaffBtn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    /* Search Input Styling */
    .search-group {
      margin-bottom: 20px;
      max-width: 300px;
    }

    .search-group label {
      font-weight: 500;
      margin-bottom: 5px;
      display: block;
    }

    .search-group .input-group-text {
      background-color: white;
      border-right: none;
    }

    .search-group .form-control {
      border-left: none;
    }

    /* Modal Styling */
    .modal-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 1000;
    }

    .modal-content {
      background: #fff;
      padding: 30px;
      border-radius: 12px;
      max-width: 600px;
      width: 90%;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    }

    .modal-close {
      position: absolute;
      top: 10px;
      right: 15px;
      font-size: 20px;
      cursor: pointer;
      color: #333;
    }

    .modal-content h2 {
      color: #4b8ef1;
      margin-top: 0;
      font-size: 1.8rem;
    }

    .modal-image {
      width: 100%;
      height: 200px;
      object-fit: cover;
      border-radius: 8px;
      margin-bottom: 20px;
    }

    .modal-details p {
      margin: 10px 0;
      font-size: 1rem;
      color: #555;
    }

    .modal-details strong {
      color: #333;
    }

    /* Responsive Adjustments */
    @media (max-width: 768px) {
      #staffRow .staff-image {
        height: 180px;
      }

      #staffRow .staff-title {
        font-size: 1.3rem;
      }

      #staffRow .card {
        max-width: 100%;
      }

      .search-group {
        max-width: 100%;
      }
    }

    @media (max-width: 576px) {
      #staffRow .staff-image {
        height: 160px;
      }

      #staffRow .staff-title {
        font-size: 1.2rem;
      }

      #moreStaffBtn,
      #lessStaffBtn {
        padding: 10px 20px;
        font-size: 0.9rem;
      }

      .modal-image {
        height: 150px;
      }
    }
  </style>
</head>
<body>
  <!-- ***** Preloader Start ***** -->
  <div id="js-preloader" class="js-preloader">
    <div class="preloader-inner">
      <span class="dot"></span>
      <div class="dots">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>
  </div>
  <!-- ***** Preloader End ***** -->

  <!-- ***** Header Area Start ***** -->
  <header class="header-area header-sticky wow slideInDown" data-wow-duration="0.75s" data-wow-delay="0s">
    <div class="container">
      <div class="row">
        <div class="col-12">
          <nav class="main-nav">
            <!-- ***** Logo Start ***** -->
            <a href="{{ url_for('fr.index') }}" class="logo">
              <img src="{{ url_for('static', filename='images/logo.png') }}" alt="ENSIT Research Center" />
            </a>
            <!-- ***** Logo End ***** -->
            <!-- ***** Menu Start ***** -->
            <ul class="nav">
              <li class="scroll-to-section"><a href="{{ url_for('fr.index') }}">Home</a></li>
              <li class="scroll-to-section"><a href="{{ url_for('fr.events') }}">Events</a></li>
              <li class="scroll-to-section"><a href="{{ url_for('fr.project') }}">Project</a></li>
              <li class="scroll-to-section"><a href="{{ url_for('fr.staff') }}" class="active">Staff</a></li>
              <li class="scroll-to-section"><a href="{{ url_for('fr.publications') }}">Publications</a></li>
              <li class="scroll-to-section"><a href="{{ url_for('fr.about') }}">About Us</a></li>
              <li class="scroll-to-section"><a href="{{ url_for('fr.contact') }}" class="contact-btn">Contact</a></li>
            </ul>
            <a class="menu-trigger">
              <span>Menu</span>
            </a>
            <!-- ***** Menu End ***** -->
          </nav>
        </div>
      </div>
    </div>
  </header>
  <!-- ***** Header Area End ***** -->

  <main style="padding-top: 150px; padding-bottom: 50px;">
    <h1 class="text-center mb-4">Our Staff</h1>
    <div class="container">
      <!-- Search Input -->
      <div class="search-group">
        <label for="researcher-input">Search by Name:</label>
        <div class="input-group">
          <span class="input-group-text">
            <i class="fas fa-user" style="color: #4b8ef1;"></i>
          </span>
          <input type="text" id="researcher-input" name="researcher" placeholder="Enter researcher name" class="form-control" aria-label="Researcher input" />
        </div>
      </div>

      <!-- Staff Grid -->
      <div id="staffRow" class="row">
        {% if researchers %}
          {% for researcher in researchers %}
          <div class="col-md-4 mb-4 staff-card {% if loop.index > 16 %}d-none{% endif %}" 
               data-staff-id="{{ loop.index }}"
               data-name="{{ researcher.FULL_NAME }}">
            <div class="card h-100">
              {% set image_path = researcher.IMAGE.replace('\\', '/') if researcher.IMAGE else '' %}
              {% set image_path = image_path[7:] if image_path.startswith('static/') else image_path %}
              <img src="{{ url_for('static', filename=image_path) if image_path else url_for('static', filename='images/uploads/staff/staff-placeholder.png') }}" 
                   alt="{{ researcher.FULL_NAME }}" class="staff-image">
              <div class="staff-details">
                <h3 class="staff-title">{{ researcher.FULL_NAME }}</h3>
                <div class="staff-position">
                  <i class="fas fa-briefcase me-1"></i>
                  <span>{{ researcher.POSITION if researcher.POSITION else 'N/A' }}</span>
                </div>
                <p class="staff-bio">{{ researcher.BIO|default('No bio available.', true)|truncate(100, true) }}</p>
                <button class="btn btn-primary learn-more-btn" 
                        data-title="{{ researcher.FULL_NAME }}"
                        data-image="{{ url_for('static', filename=image_path) if image_path else url_for('static', filename='images/uploads/staff/staff-placeholder.png') }}"
                        data-position="{{ researcher.POSITION if researcher.POSITION else 'N/A' }}"
                        data-bio="{{ researcher.BIO if researcher.BIO else 'No bio available' }}">Learn More</button>
              </div>
            </div>
          </div>
          {% endfor %}
        {% else %}
          <div class="col-12 text-center">
            <p>No staff members found.</p>
          </div>
        {% endif %}
        <div class="text-center mt-4">
          <button id="moreStaffBtn" class="btn btn-secondary">More</button>
          <button id="lessStaffBtn" class="btn btn-secondary" disabled>Less</button>
        </div>
      </div>
    </div>
  </main>

  <!-- Staff Details Modal -->
  <div id="detailsModal" class="modal-overlay">
    <div class="modal-content">
      <span class="modal-close">×</span>
      <img id="modal-image" class="modal-image" src="" alt="Staff Image">
      <h2 id="modal-title"></h2>
      <div class="modal-details">
        <p><strong>Position:</strong> <span id="modal-position"></span></p>
        <p><strong>Bio:</strong> <span id="modal-bio"></span></p>
      </div>
    </div>
  </div>

  <footer id="contact">
    <div class="container">
      <div class="row">
        <div class="col-lg-3">
          <div class="footer-widget">
            <h4>Contact Us</h4>
            <p>ENSIT Beb Alioua, Tunis</p>
            <p><a href="#">123456789</a></p>
            <p><a href="mailto:ensit@research.center">ensit@research.center</a></p>
          </div>
        </div>
        <div class="col-lg-3">
          <div class="footer-widget">
            <h4>About Us</h4>
            <ul>
              <li><a href="{{ url_for('fr.index') }}">Home</a></li>
              <li><a href="#">Services</a></li>
              <li><a href="{{ url_for('fr.about') }}">About</a></li>
              <li><a href="#">Testimonials</a></li>
              <li><a href="#">Pricing</a></li>
            </ul>
          </div>
        </div>
        <div class="col-lg-3">
          <div class="footer-widget">
            <h4>Useful Links</h4>
            <ul>
              <li><a href="#">Research</a></li>
              <li><a href="{{ url_for('fr.project') }}">Projects</a></li>
              <li><a href="{{ url_for('fr.publications') }}">Publications</a></li>
              <li><a href="{{ url_for('fr.events') }}">Events</a></li>
              <li><a href="#">News</a></li>
            </ul>
          </div>
        </div>
        <div class="col-lg-3">
          <div class="footer-widget">
            <h4>About Our Center</h4>
            <div class="logo">
              <img src="{{ url_for('static', filename='images/white-logo.png') }}" alt="" />
            </div>
            <p>ENSIT Research Center is dedicated to advancing knowledge and innovation through interdisciplinary research and collaboration.</p>
          </div>
        </div>
        <div class="col-lg-12">
        <div class="copyright-text">
          <p>Copyright © 2023 ENSIT Research Center. All Rights Reserved.</p>
        </div>
      </div>
    </div>
  </footer>

  <!-- Contact Form Overlay -->
  <div id="form-overlay" class="modal-overlay">
    <div class="modal-content">
      <span class="modal-close">×</span>
      <form id="contact-form" action="{{ url_for('fr.contact') }}" method="POST">
        <h2 style="margin-top: 0; color: #4b8ef1; text-align: center;">Contact Us</h2>
        <div style="margin-bottom: 15px;">
          <label for="name" style="display: block; margin-bottom: 5px; font-weight: 500;">Name:</label>
          <input type="text" id="name" name="name" required style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box;">
        </div>
        <div style="margin-bottom: 15px;">
          <label for="email" style="display: block; margin-bottom: 5px; font-weight: 500;">Email:</label>
          <input type="email" id="email" name="email" required style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box;">
        </div>
        <div style="margin-bottom: 20px;">
          <label for="message" style="display: block; margin-bottom: 5px; font-weight: 500;">Message:</label>
          <textarea id="message" name="message" rows="5" required style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box; resize: vertical;"></textarea>
        </div>
        <div style="display: flex; justify-content: space-between;">
          <button type="button" id="cancel-contact-btn" style="padding: 10px 20px; background-color: #f44336; color: white; border: none; border-radius: 4px; cursor: pointer;">Cancel</button>
          <button type="submit" style="padding: 10px 20px; background-color: #4b8ef1; color: white; border: none; border-radius: 4px; cursor: pointer;">Send Message</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Scripts --->
  <!-- Scripts -->
<script src="{{ url_for('static', filename='js/jquery.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/bootstrap.bundle.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/owl-carousel.js') }}"></script>
<script src="{{ url_for('static', filename='js/animation.js') }}"></script>
<script src="{{ url_for('static', filename='js/imagesloaded.js') }}"></script>
<script src="{{ url_for('static', filename='js/popup.js') }}"></script>
<script src="{{ url_for('static', filename='js/custom.js') }}"></script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    const staffRow = document.getElementById('staffRow');
    const moreStaffBtn = document.getElementById('moreStaffBtn');
    const lessStaffBtn = document.getElementById('lessStaffBtn');
    const staffCards = document.querySelectorAll('.staff-card');
    const detailsModal = document.getElementById('detailsModal');
    const modalClose = document.querySelector('#detailsModal .modal-close');
    const modalImage = document.getElementById('modal-image');
    const modalTitle = document.getElementById('modal-title');
    const modalPosition = document.getElementById('modal-position');
    const modalBio = document.getElementById('modal-bio');
    const researcherInput = document.getElementById('researcher-input');
    const contactFormOverlay = document.getElementById('form-overlay');
    const cancelContactBtn = document.getElementById('cancel-contact-btn');
    const closeBtn = document.querySelector('#form-overlay .modal-close');
    const contactButtons = document.querySelectorAll('.contact-btn');
    const initialDisplayCount = 16;
    let visibleCount = Math.min(initialDisplayCount, staffCards.length);

    // Function to update button states
    function updateButtonStates() {
      if (!moreStaffBtn || !lessStaffBtn) return;
      const visibleCards = Array.from(staffCards).filter(card => !card.classList.contains('d-none'));
      moreStaffBtn.disabled = visibleCards.length >= staffCards.length;
      lessStaffBtn.disabled = visibleCards.length <= initialDisplayCount;
    }

    // Initial button state
    updateButtonStates();

    // More button click handler
    if (moreStaffBtn) {
      moreStaffBtn.addEventListener('click', function() {
        const nextBatch = Array.from(staffCards)
          .filter(card => card.classList.contains('d-none'))
          .slice(0, initialDisplayCount);
        nextBatch.forEach(card => {
          card.classList.remove('d-none');
        });
        visibleCount = Math.min(visibleCount + nextBatch.length, staffCards.length);
        updateButtonStates();
      });
    }

    // Less button click handler
    if (lessStaffBtn) {
      lessStaffBtn.addEventListener('click', function() {
        const excessCards = Array.from(staffCards).slice(initialDisplayCount);
        excessCards.forEach(card => {
          card.classList.add('d-none');
        });
        visibleCount = initialDisplayCount;
        updateButtonStates();
      });
    }

    // Search functionality
    if (researcherInput) {
      researcherInput.addEventListener('input', function() {
        const searchValue = this.value.toLowerCase().trim();
        staffCards.forEach((card, index) => {
          const name = card.dataset.name ? card.dataset.name.toLowerCase() : '';
          const matchesSearch = name.includes(searchValue);
          card.classList.toggle('d-none', !matchesSearch || index >= visibleCount);
        });
        updateButtonStates();
      });
    }

    // Learn More button and Modal handling
    const learnMoreButtons = document.querySelectorAll('.learn-more-btn');
    learnMoreButtons.forEach(button => {
      button.addEventListener('click', function() {
        if (!detailsModal) return;
        modalImage.src = this.dataset.image || '';
        modalTitle.textContent = this.dataset.title || 'Unknown';
        modalPosition.textContent = this.dataset.position || 'N/A';
        modalBio.textContent = this.dataset.bio || 'No bio available';
        detailsModal.style.display = 'block';
      });
    });

    if (modalClose) {
      modalClose.addEventListener('click', function() {
        if (detailsModal) detailsModal.style.display = 'none';
      });
    }

    if (detailsModal) {
      detailsModal.addEventListener('click', function(e) {
        if (e.target === detailsModal) {
          detailsModal.style.display = 'none';
        }
      });
    }


  });
</script>
</body>
</html>